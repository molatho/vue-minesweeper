(function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],u=0,f=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},i={app:0},o=[];function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vue-minesweeper/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("85ec"),i=s.n(n);i.a},"16c0":function(t,e,s){},"4e11":function(t,e,s){s("99af"),s("e25e");var n=s("970b"),i=s("5bc3"),o=s("b321"),a=function(){"use strict";function t(){n(this,t),this.vocabulary=o}return i(t,[{key:"getRandomSentence",value:function(){var t=["the","a"],e=[".","!","?"],s=this.vocabulary.nouns[parseInt(Math.random()*this.vocabulary.nouns.length)],n=this.vocabulary.verbs[parseInt(Math.random()*this.vocabulary.verbs.length)],i=this.vocabulary.nouns[parseInt(Math.random()*this.vocabulary.nouns.length)],o=t[parseInt(Math.random()*t.length)],a=t[parseInt(Math.random()*t.length)],r=e[parseInt(Math.random()*e.length)];return"?"==r?"Did ".concat(o," ").concat(s," ").concat(n," ").concat(a," ").concat(i).concat(r):(o=o.charAt(0).toUpperCase()+o.substr(1,o.length-1),"".concat(o," ").concat(s," ").concat(n," ").concat(a," ").concat(i).concat(r))}}]),t}();t.exports=a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("0cdd");var n=s("2b0e"),i=s("5f5b");s("ab8b"),s("2dd8");n["default"].use(i["a"]);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("b-container",[s("b-row",[s("b-col",{staticClass:"logo"},[t._v(" Vue-Sweeper "),"lost"==this.stats.state?s("font-awesome-icon",{staticClass:"lost",attrs:{icon:"bomb"}}):t._e(),"won"==this.stats.state?s("font-awesome-icon",{staticClass:"won",attrs:{icon:"flag"}}):t._e()],1)],1),s("b-row",[s("b-col",[s("Board",{ref:"board",attrs:{id:"board",config:this.config,stats:t.stats}})],1)],1),s("b-row",[s("b-col",[s("game-stats",{attrs:{stats:t.stats}})],1)],1),s("b-row",[s("b-col",[s("b-button-group",[s("b-button",{attrs:{disabled:"running"!=this.stats.state},on:{click:t.onResetClicked}},[t._v(" Reset")]),s("b-button",{on:{click:function(e){return t.$refs["board"].reset(!0)}}},[t._v(" New Game")]),s("b-button",{attrs:{disabled:"lost"!=this.stats.state&&"won"!=this.stats.state},on:{click:t.onReplayClicked}},[t._v(" Replay")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.settings",modifiers:{settings:!0}}],attrs:{size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"cog"}})],1)],1)],1)],1),s("b-row",[s("configuration-modal",{attrs:{id:"settings",config:this.config}})],1)],1)],1)},a=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.hasFields?s("div",{staticClass:"board"},t._l(t.fieldRows,(function(e){return s("div",{key:t.fieldRows.indexOf(e),staticClass:"fieldRow"},t._l(e,(function(e){return s("Field",{key:e.idx,attrs:{fieldData:e},on:{opened:t.onFieldOpened,flagged:t.onFieldFlagged,unflagged:t.onFieldUnflagged,clicked:t.onFieldClicked}})})),1)})),0):t._e()])},l=[],c=(s("4de4"),s("5377"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field",on:{click:t.fieldClick,contextmenu:function(e){return e.preventDefault(),t.onFlagged(e)}}},["default"==t.state?s("div",{staticClass:"fieldDefault"}):t._e(),"opened"!=t.state||t.isMine?t._e():s("div",{class:"fieldOpened fieldOpened"+t.mines},[t.mines>0?s("span",[t._v(t._s(t.mines))]):t._e()]),"opened"==t.state&&t.isMine?s("div",{staticClass:"fieldMine"},[s("font-awesome-icon",{attrs:{icon:"bomb"}})],1):t._e(),"flagged"==t.state?s("div",{staticClass:"fieldFlag"},[s("font-awesome-icon",{attrs:{icon:"flag"}})],1):t._e()])}),d=[],u={name:"Field",props:["fieldData"],computed:{idx:function(){return this.fieldData.idx},x:function(){return this.fieldData.x},y:function(){return this.fieldData.y},state:function(){return this.fieldData.state},isMine:function(){return this.fieldData.isMine},mines:function(){return this.fieldData.mines}},watch:{state:function(t,e){"default"==e&&"opened"==t&&this.$emit("opened",this)}},methods:{fieldClick:function(){this.$emit("clicked",this)},open:function(){"default"==this.state&&(this.fieldData.state="opened")},onFlagged:function(){"default"==this.state?this.$emit("flagged",this):"flagged"==this.state&&this.$emit("unflagged",this)}}},f=u,h=(s("bd94"),s("2877")),g=Object(h["a"])(f,c,d,!1,null,null,null),m=g.exports,b=s("5c74"),p=s.n(b),w={name:"Board",components:{Field:m},props:["config","stats"],data:function(){return{generator:null}},computed:{fields:function(){return this.generator?this.generator.fields:[]},fieldRows:function(){for(var t=[],e=[],s=0;s<this.fields.length;s++)s>0&&s%this.columns==0&&(t.push(e),e=[]),e.push(this.fields[s]);return t.push(e),t},hasFields:function(){return this.fields&&this.fields.length>0},rows:function(){return this.config.rows},columns:function(){return this.config.columns}},watch:{rows:function(t,e){this.resize(this.columns,this.columns,e,t)},columns:function(t,e){this.resize(e,t,this.rows,this.rows)},config:{immediate:!0,handler:function(t){t&&(this.generator=new p.a(t),this.reset())}}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){"Space"==e.code&&(e.preventDefault(),t.reset())}))},methods:{reset:function(t){t&&this.generator.setRandomSeed(),this.generator.generateFields(),this.resetStats()},resize:function(t,e,s,n){this.generator.resize(t,e,s,n),"running"==this.stats.state&&this.generator.generateMines()},resetStats:function(){this.stats.state="new",this.stats.mines=this.fields.filter((function(t){return t.isMine})).length,this.stats.opened=this.fields.filter((function(t){return"opened"==t.state})).length,this.stats.flags=this.fields.filter((function(t){return"flagged"==t.state})).length,this.stats.numFields=this.fields.length},onFieldClicked:function(t){"new"==this.stats.state&&(this.stats.state="running",this.generator.generateMines(t.idx),this.stats.mines=this.fields.filter((function(t){return t.isMine})).length),"running"==this.stats.state&&"default"==t.state&&(t.fieldData.state="opened")},hasWon:function(){return this.stats.opened==this.fields.length-this.stats.mines&&this.stats.opened+this.stats.flags==this.fields.length&&this.stats.mines==this.stats.flags},setLost:function(t){if("running"==this.stats.state)for(var e in this.stats.state="lost",this.$emit("hitMine",t),this.fields)this.fields[e].isMine&&(this.fields[e].state="opened")},onFieldOpened:function(t){if(this.stats.opened++,"running"==this.stats.state){if(t.isMine)return this.setLost(t);if(0==t.mines){var e=this.generator.getFieldsAround(t.x,t.y);for(var s in e)e[s].isMine||(this.fields[e[s].idx].state="opened")}this.hasWon()&&(this.stats.state="won",this.$emit("won"))}},onFieldFlagged:function(t){"running"==this.stats.state&&(t.fieldData.state="flagged",this.stats.flags++,this.hasWon()&&(this.stats.state="won",this.$emit("won")))},onFieldUnflagged:function(t){"running"==this.stats.state&&(t.fieldData.state="default",this.stats.flags--,this.hasWon()&&(this.stats.state="won",this.$emit("won")))}}},v=w,y=(s("b2e8"),Object(h["a"])(v,r,l,!1,null,null,null)),k=y.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["new"==this.stats.state?s("b-container",[s("b-row",[s("b-col",[t._v(" Click a field to begin! ")])],1)],1):t._e(),"new"!=this.stats.state?s("b-container",[s("b-row",[s("b-col",[t._v(" Flags: "+t._s(this.stats.flags)+" / "+t._s(this.stats.mines)+" ")])],1),s("b-row",[s("b-col",[t._v(" Revealed: "+t._s(this.openedPercent)+"% ("+t._s(this.stats.opened)+" / "+t._s(this.stats.numFields-this.stats.mines)+") ")])],1)],1):t._e()],1)},x=[],F=(s("e25e"),{name:"GameStats",props:["stats"],computed:{openedPercent:function(){return parseInt(this.stats.opened/(this.stats.numFields-this.stats.mines)*100)}}}),M=F,S=Object(h["a"])(M,_,x,!1,null,null,null),D=S.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:t.id,"ok-only":"",title:"Vue-Sweeper Configuration"}},[s("b-container",[s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("label",{attrs:{for:"mineDensity"}},[t._v("Mines: "+t._s(parseInt(100*t.config.mineDensity))+"%")])]),s("b-col",{attrs:{sm:"8"}},[s("b-form-input",{attrs:{id:"mineDensity",type:"range",min:"0",max:"1",step:"0.01"},model:{value:t.config.mineDensity,callback:function(e){t.$set(t.config,"mineDensity",e)},expression:"config.mineDensity"}})],1)],1),s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("label",{attrs:{for:"columns"}},[t._v("Dimensions:")])]),s("b-col",{attrs:{sm:"1"}}),s("b-col",{attrs:{sm:"3"}},[s("b-form-input",{attrs:{id:"columns",type:"number",min:"1",max:"100",step:"1"},model:{value:t.config.columns,callback:function(e){t.$set(t.config,"columns",e)},expression:"config.columns"}})],1),s("b-col",{attrs:{sm:"1"}},[t._v("x")]),s("b-col",{attrs:{sm:"3"}},[s("b-form-input",{attrs:{id:"rows",type:"number",min:"1",max:"100",step:"1"},model:{value:t.config.rows,callback:function(e){t.$set(t.config,"rows",e)},expression:"config.rows"}})],1)],1),s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("label",{attrs:{for:"seed"}},[t._v("Seed:")])]),s("b-col",{attrs:{sm:"8"}},[s("b-form",{attrs:{inline:""}},[s("b-form-input",{attrs:{id:"seed",type:"text"},model:{value:t.config.seed,callback:function(e){t.$set(t.config,"seed",e)},expression:"config.seed"}}),s("b-button",{on:{click:t.assignRandomSeed}},[s("font-awesome-icon",{attrs:{icon:"dice"}})],1)],1)],1)],1),s("b-row",[s("b-col",{attrs:{sm:"4"}},[s("label",{attrs:{for:"b64"}},[t._v("B64:")])]),s("b-col",{attrs:{sm:"8"}},[s("b-form-input",{attrs:{id:"b64",type:"text",readonly:!0},model:{value:t.b64,callback:function(e){t.b64=e},expression:"b64"}})],1)],1)],1)],1)},O=[],$=s("4e11"),R=s.n($),j={name:"ConfigurationModal",props:["id","config"],computed:{b64:function(){return btoa(JSON.stringify(this.config))},cseed:{get:function(){return this.config.seed},set:function(t){this.config.seed=t}}},data:function(){return{sentenceGenerator:new R.a}},methods:{assignRandomSeed:function(){var t=this;this.$nextTick().then((function(){t.config.seed=t.sentenceGenerator.getRandomSentence()}))}}},A=j,I=Object(h["a"])(A,C,O,!1,null,null,null),P=I.exports,G={name:"app",components:{Board:k,GameStats:D,ConfigurationModal:P},data:function(){return{stats:{flags:0,opened:0,mines:0,numFields:0,state:"new"},config:{columns:10,rows:10,mineDensity:.15,seed:"init"}}},mounted:function(){},methods:{onResetClicked:function(){"running"==this.stats.state&&this.$refs["board"].reset()},onReplayClicked:function(){"lost"!=this.stats.state&&"won"!=this.stats.state||this.$refs["board"].reset(!1)}}},z=G,E=(s("034f"),Object(h["a"])(z,o,a,!1,null,null,null)),N=E.exports,B=s("ecee"),J=s("c074"),T=s("ad3d");B["c"].add(J["b"],J["e"],J["c"],J["a"],J["d"]),n["default"].component("font-awesome-icon",T["a"]),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(N)}}).$mount("#app")},"5c74":function(t,e,s){s("4de4"),s("e25e");var n=s("970b"),i=s("5bc3"),o=s("d34e"),a=s("4e11"),r=function(){"use strict";function t(e){if(n(this,t),this.config=e,this.twister=new o(this.config.seed),this.fields=this.generateFields(),this.sentenceGenerator=new a,void 0==this.config)throw new Error("Config required");this.setRandomSeed()}return i(t,[{key:"generateFields",value:function(){this.setSeed(this.config.seed),this.fields=[];for(var t=0;t<this.config.rows;t++)for(var e=0;e<this.config.columns;e++)this.fields.push({state:"default",isMine:!1,mines:0,x:e,y:t,idx:t*this.config.columns+e})}},{key:"generateFromB64",value:function(t){var e=JSON.parse(atob(t));return this.generate(e.config)}},{key:"generateMines",value:function(t){var e=this.fields.filter((function(t){return t.isMine})).length,s=parseInt(this.fields.length*this.config.mineDensity),n=0;do{var i=parseInt(this.twister.random()*this.fields.length);this.fields[i].isMine||"opened"==this.fields[i].state||i==t||(this.fields[i].isMine=!0,n++)}while(n<s-e);this.calculateNeighbours()}},{key:"calculateNeighbours",value:function(){for(var t=0;t<this.fields.length;t++)this.fields[t].isMine||(this.fields[t].mines=this.getFieldsAround(this.fields[t].x,this.fields[t].y).filter((function(t){return t.isMine})).length)}},{key:"getFieldsAround",value:function(t,e){return[this.getFieldAt(t-1,e-1),this.getFieldAt(t,e-1),this.getFieldAt(t+1,e-1),this.getFieldAt(t-1,e),this.getFieldAt(t+1,e),this.getFieldAt(t-1,e+1),this.getFieldAt(t,e+1),this.getFieldAt(t+1,e+1)].filter((function(t){return null!=t}))}},{key:"getFieldAt",value:function(t,e){return t>=0&&t<this.config.columns&&e>=0&&e<this.config.rows?this.fields[e*this.config.columns+t]:null}},{key:"resize",value:function(t,e,s,n){for(var i=[],o=0;o<n;o++)for(var a=0;a<e;a++){var r=this.fields.filter((function(t){return t.y==o&&t.x==a}))[0];r||(r={state:"default",isMine:!1,mines:0,x:a,y:o,idx:o*e+a}),i.push(r)}this.fields=i}},{key:"setRandomSeed",value:function(){this.setSeed(this.sentenceGenerator.getRandomSentence())}},{key:"setSeed",value:function(t){t||(t=this.sentenceGenerator.getRandomSentence()),this.config.seed=t;var e=0,s=t.length,n=0;if(s>0)while(n<s)e=(e<<5)-e+t.charCodeAt(n++)|0;this.twister.init_seed(e)}}]),t}();t.exports=r},"85ec":function(t,e,s){},b2e8:function(t,e,s){"use strict";var n=s("16c0"),i=s.n(n);i.a},b321:function(t,e){t.exports={nouns:["area","book","business","case","child","company","country","day","eye","fact","family","government","group","hand","home","job","life","lot","man","money","month","mother","night","number","part","people","place","point","problem","program","question","right","room","school","state","story","student","study","system","thing","time","water","way","week","woman","word","work","world","year"],verbs:["arose","awoke","was","bore","beat","became","began","bent","bet","bound","bit","bled","blew","broke","bred","brought","broadcast","built","burnt","burst","bought","could","caught","chose","clung","came","cost","crept","cut","dealt","dug","did","drew","dreamt","drank","drove","ate","fell","fed","felt","fought","found","flew","forbade","forgot","forgave","froze","got","gave","went","ground","grew","hung","had","heard","hid","hit","held","hurt","kept","knelt","knew","laid","led","leant","learnt","left","lent","lay","lied","lit","lost","made","might","meant","met","mowed","had to","overtook","paid","put","read","rode","rang","rose","ran","sawed","said","saw","sold","sent","set","sewed","shook","should","shed","shone","shot","showed","shrank","shut","sang","sank","sat","slept","slid","smelt","sowed","spoke","spelt","spent","spilt","spat","spread","stood","stole","stuck","stung","stank","struck","swore","swept","swelled","swam","swung","took","taught","tore","told","thought","threw","understood","woke","wore","wept","would","won","wound","wrote"]}},bd94:function(t,e,s){"use strict";var n=s("d88b"),i=s.n(n);i.a},d88b:function(t,e,s){}});
//# sourceMappingURL=app.16b72dc5.js.map